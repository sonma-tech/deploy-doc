开始使用(Get Started)
=====================

.. toctree::
   :maxdepth: 2
   :caption: Contents:

.. _summary:

概述
----------------

胜马云打印服务是基于Java开发，适用于胜马云打印机的管理控制应用。主要由两部分组成：打印机后端应用，负责服务器与打印机之间的实时通讯，打印机的实时状态的维护，打印任务的分发；
API服务端应用，提供外部访问的HTTP接口，推送任务到打印队列。

胜马云打印服务的设计目标是承载海量打印机终端连接，并实现设备间快速低延时消息路由。

.. thumbnail:: ./_static/images/base.png

.. _diagram:

部署图(Deployment Diagram)
-----------------------------------

.. thumbnail:: ./_static/images/deploy.png


.. _lb:

负载均衡(LB)
--------------
LB (负载均衡器) 负责分发设备的 TCP 连接与消息到 打印机后端服务 集群，LB 提高集群可用性、实现负载平衡以及动态扩容，部署时使用阿里云的SLB。
API服务使用HTTPS时需要在SLB上配置SSL证书。


.. _container_service:

容器服务
------------------------------
使用docker镜像进行交付，部署前需要建立容器服务集群，并绑定SLB, 编排镜像, 添加初始节点后才可以开始部署。

阿里云容器服务可以动态伸缩节点, 监控应用状态。

.. _clusters:

集群
-----------------
集群在容器服务中创建，创建后需要添加初始节点，初始节点不受伸缩条件的影响，建议部署在 VPC 或私有网络内。

服务开启默认的TCP端口:

============ =======================
55557        打印机服务协议端口
80           API服务协议端口
============ =======================

防火墙根据使用的打印机的接入方式，开启上述端口的访问权限或使用正确的权限组。

.. _database:

数据库
------------------
数据库使用RDS Mysql, 最低版本5.6, 需要使用高可用主从版，为了保障数据安全需要部署在VPC网络内, 关闭外网访问。

.. _redis:

Redis
------------------
Redis不仅起到数据缓存的作用, 同时在集群承担消息分发的作用, 需要使用集群版保障高可用性。
